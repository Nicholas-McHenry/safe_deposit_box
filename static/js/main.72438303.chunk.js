(this.webpackJsonpsafe_deposit_box=this.webpackJsonpsafe_deposit_box||[]).push([[0],{22:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(4),s=n(1),c=n.n(s),r=n(16),i=n.n(r),o=(n(22),n(8)),u=n(9),l=n(13),d=n(12),p=n(10),h=n(11),b=Object.freeze({LOCKED:"Locked",UNLOCKED:"Unlocked"}),E=Object.freeze({BLANK:"",ERROR:"Error",READY:"Ready",LOCKING:"Locking",UNLOCKING:"Unlocking",SERVICE:"Service",VALIDATING:"Validating"}),O=Object.freeze({ONE:"1",TWO:"2",THREE:"3",FOUR:"4",FIVE:"5",SIX:"6",SEVEN:"7",EIGHT:"8",NINE:"9",ZERO:"0",ASTERIX:"*",LOCK:"L"}),f=[O.SEVEN,O.EIGHT,O.NINE,O.FOUR,O.FIVE,O.SIX,O.ONE,O.TWO,O.THREE,O.ASTERIX,O.ZERO,O.LOCK],S=Object.freeze({INPUT_PASSCODE:"INPUT_PASSCODE",CHANGE_STATUS:"CHANGE_STATUS",CHANGE_MESSAGE:"CHANGE_MESSAGE",CREATE_PASSCODE:"CREATE_PASSCODE"}),N=Object.freeze({VALIDATE_SN:"VALIDATE_SN"}),j=function(e){return{type:S.INPUT_PASSCODE,payload:e}},m=function(e){return{type:S.CHANGE_STATUS,payload:e}},v=function(e){return{type:S.CHANGE_MESSAGE,payload:e}},T=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(h.a)(a)),a.checkEnteredPasscode=a.checkEnteredPasscode.bind(Object(h.a)(a)),a.clearInputPasscode=a.clearInputPasscode.bind(Object(h.a)(a)),a.lockTheSafe=a.lockTheSafe.bind(Object(h.a)(a)),a.validateSN=a.validateSN.bind(Object(h.a)(a)),a.state={inputTimeout:null,lockingTimeout:null},a}return Object(u.a)(n,[{key:"handleClick",value:function(e){var t=this,n=this.state.inputTimeout,a=this.props,s=a.dispatch,c=a.status,r=a.message;c===b.LOCKED?r===E.SERVICE?(s(j(e)),null!=n&&clearTimeout(n),this.setState({inputTimeout:setTimeout((function(){t.validateSN()}),1200)})):e!==O.LOCK&&e!==O.ASTERIX?(s(j(e)),null!=n&&clearTimeout(n),this.setState({inputTimeout:setTimeout((function(){t.checkEnteredPasscode()}),1200)})):this.clearInputPasscode():e!==O.LOCK&&e!==O.ASTERIX?s(j(e)):e===O.LOCK?this.lockTheSafe():this.clearInputPasscode()}},{key:"checkEnteredPasscode",value:function(){var e=this,t=this.props,n=t.dispatch;t.passcode===t.enteredPasscode?(n(v(E.UNLOCKING)),setTimeout((function(){n(m(b.UNLOCKED)),n(v(E.READY)),e.clearInputPasscode()}),3e3)):this.clearInputPasscode()}},{key:"clearInputPasscode",value:function(){this.props.dispatch(j(null))}},{key:"validateSN",value:function(){var e=this.props,t=e.enteredPasscode,n=e.dispatch,a=e.serialNumber;n(v(E.VALIDATING)),n(function(e,t){return{type:N.VALIDATE_SN,payload:e,serialNumber:t}}(t,a))}},{key:"lockTheSafe",value:function(){var e=this.props,t=e.enteredPasscode,n=e.dispatch;null!=t&&t.length>=6&&(n(v(E.LOCKING)),setTimeout((function(){var e;n((e=t,{type:S.CREATE_PASSCODE,payload:e})),n(j(null)),n(m(b.LOCKED)),n(v(E.READY))}),3e3))}},{key:"getButtonList",value:function(){var e=this;return f.map((function(t,n){return Object(a.jsx)("button",{className:"btn",onClick:function(){return e.handleClick(t)},children:t},n)}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"sdb-numpad",children:this.getButtonList()})}}]),n}(c.a.Component),A=Object(p.b)((function(e){return{status:e.status,passcode:e.passcode,enteredPasscode:e.inputPasscode,message:e.message,serialNumber:e.serialNumber}}))(T),C=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={screenTimeout:null,backlight:"off"},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({screenTimeout:setTimeout((function(){e.setState({backlight:"off"})}),5e3)})}},{key:"componentDidUpdate",value:function(e,t,n){var a=this;if(e.enteredPasscode!==this.props.enteredPasscode){var s=this.props.dispatch;clearTimeout(this.state.screenTimeout),this.setState({backlight:"on",screenTimeout:setTimeout((function(){a.setState({backlight:"off"})}),5e3)}),"000000"===this.props.enteredPasscode&&setTimeout((function(){s(j(null)),s(v(E.SERVICE))}),1200)}}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.message,s=this.state.backlight;return Object(a.jsxs)("div",{className:"sdb-screen backlight-".concat(s),children:[Object(a.jsx)("div",{className:"sdb-status",children:t}),Object(a.jsx)("div",{className:"sdb-status-messages",children:n})]})}}]),n}(c.a.Component),k=Object(p.b)((function(e){return{status:e.status,message:e.message,enteredPasscode:e.inputPasscode}}))(C),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("div",{className:"sdb-container",children:Object(a.jsxs)("div",{className:"sdb-body",children:[Object(a.jsx)(k,{}),Object(a.jsx)(A,{}),Object(a.jsxs)("div",{className:"sn",children:["S/N: ",this.props.serialNumber]})]})})})}}]),n}(c.a.Component),y=Object(p.b)((function(e){return{serialNumber:e.serialNumber}}))(I),g=n(7),P=n(25),D=Object(g.c)({status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===S.CHANGE_STATUS?t.payload:e},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===S.CHANGE_MESSAGE?t.payload:e},serialNumber:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},passcode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===S.CREATE_PASSCODE?t.payload:e},inputPasscode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===S.INPUT_PASSCODE?null!=e?null!=t.payload?e+t.payload:null:t.payload:e}}),L=n(14),R=n.n(L),_=n(15),x=n(24),G=n.n(x),U=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"validateSerialNumber",value:function(e){return G()("https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a?code="+e).then((function(e){return e.json()})).catch((function(e){console.log("There was an error in fetching:",e)}))}}]),e}(),K=R.a.mark(H),V=R.a.mark(w);function H(e){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(_.a)(U.validateSerialNumber,e.payload);case 3:if(t.sent.sn!==e.serialNumber){t.next=7;break}return t.next=7,Object(_.b)(m(b.UNLOCKED));case 7:return t.next=9,Object(_.b)(v(E.READY));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("There was an error while fetching the data:",t.t0);case 14:case"end":return t.stop()}}),K,null,[[0,11]])}function w(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.c)(N.VALIDATE_SN,H);case 2:case"end":return e.stop()}}),V)}var z=w,M={status:b.UNLOCKED,message:E.READY,serialNumber:"4815162342",passcode:null,inputPasscode:null},X=Object(P.a)(),Y=Object(g.e)(D,M,Object(g.a)(X));X.run(z),i.a.render(Object(a.jsx)(p.a,{store:Y,children:Object(a.jsx)(y,{})}),document.querySelector("#root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.72438303.chunk.js.map